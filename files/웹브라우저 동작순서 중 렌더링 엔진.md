https://d2.naver.com/helloworld/59361

브라우저 구성 요소는 다음과 같다.

1. 사용자 인터페이스
   : 주소 표시줄, 이전/다음 버튼, 북마크 메뉴 등의 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부분이다.
2. 브라우저 엔진
   : 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어하는 역할
3. 렌더링 엔진
   : 요청한 컨텐츠를 표시하는 역할
4. 통신
   : HTTP 요청과 같은 네트워크 호출에 사용된다.
5. UI 백엔드
   : UI 백엔드는 콤보 박스와 얼럿 창같은 기본적인 틀을 뜻한다. 플랫폼에서 명시하지 않은 일반적인 인터페이스이다.
6. 자바스크립트 해석기
   : 자바스크립트 코드를 해석하고 실행한다.
7. 스토리지
   : 쿠키등을 저장하는 계층이다.

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-1.png"/>

즉, 위와 같은 구성요소를 지닌다.

(크롬에서는 브라우저와 달리 각 탭마다 별도의 렌더링 엔진 인스턴스를 유지한다. 즉, 각 탭이 독립된 프로세스로 처리되는 것이다.)

이제 핵심적인 요소들에 대해 설명을 하도록 하겠다.

### 렌더링 엔진

렌더링 엔진은 요청받은 내용을 브라우저 화면에 표시하는 것이다.

렌더링 엔진은 HTML 및 XML 문서와 이미지를 표시할 수 있다.
물론 플러그인이나 브라우저 확장 기능을 이용해서 PDF와 같은 다른 유형도 표시할 수 있다.
하지만 HTML, CSS가 핵심이므로 이 부분에 대해서 설명하겠다.

#### 종류

크롬, 파이어폭스, 사파리는 두 종류의 렌더링 엔진을 사용한다.
파이어폭스는 모질라에서 직접만든 게코(Gecko)엔진을 사용.
사파리와 크롬은 웹킷(webkit) 엔진을 사용.

- 참고로 [웹킷](https://webkit.org/)은 최초 리눅스 플랫폼에서 동작을 위해 제작된 오픈소스 엔진이고, 애플이 맥과 윈도우에서 사파리 브라우저를 지원하기 위해서 수정되었다.

#### 동작 과정

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-2.png"/>

렌더링 엔진은 통신으로부터 요청한 문서의 내용을 얻는 것으로 시작된다. (보통 8kb단위로 전송된다.)

1. 렌더링 엔진은 HTML 문서를 파싱하고 콘텐츠 트리 내부에서 태그를 DOM 노드로 변환한다.
   1-1. 그 다음엔 외부 CSS 파일과 함께 포함된 스타일 요소도 파싱한다.

2. 파싱이 끝나면, 스타일 정보와 HTML 표시 규칙을 렌더 트리를 생성한다.

3. 렌더 트리 생성이 끝나면 배치가 시작된다. 이것은 각 노드가 화면의 정확한 위치에 표시되는 것을 의미한다.

4. 렌더링 엔진은 좀 더 나은 사용자 경험을 위해서 HTML을 파싱할 때까지 기다리지 않고, 배치와 그리기 과정을 시작한다.
   즉, 네트워크로부터 나머지 내용이 전송되기를 기다리는 동시에 받은 내용의 일부를 먼저 화면에 표시하는 것이다.

- 즉, DOM 트리와 렌더트리는 다른 것이다.
  DOM 트리는 내용 DOM 내용 자체를 저장하고 있고, 화면에 표시하기 위한 내용을 저장하는 별도의 트리가 바로 렌더트리이다.
  그리고 DOM트리에 어테치먼트 과정을 통해서 렌더트리가 만들어진다.
