# 리팩터링 - 기능 옮기기 



- 함수 옮기기

모듈성

이해가 높아질수록 새로운 묶는 방법 발견
=> 더 높아진 이해를 코드에 반영하기

함수가 자신이 속한 모듈A보다 다른 모듈B를 더 많이 참조한다면 옮겨야한다.

긴가민가할 때에는 A,B를 둘러보아라.





- 필드 옮기기

프로그램의 진짜 힘은 데이터 구조에서 나온다.

데이터가 적절하지 않음을 깨달으면 곧바로 수정한다.





- 문장을 함수로 옮기기

중복을 제거하는것.

함수로 되어있지 않은 것을 함수로 만드는것

함수 추출하는것은 중복 제거하기가 목적이 아니었다. (구현과 목적을 분리하는 목적이었음)



문장들이 피호출 함수의 일부라는 확신이 필요하다. (원래 안에 있어야하는데 밖에 있는 경우)



문장과 피호출 함수를 통째로 또 하나의 함수로 추출하기도 가능하다.



- 문장을 호출한 곳으로 옮기기

여러 곳에서 사용하던 기능이 일부 호출자에게는 다르게 동작하도록 바뀌어야 하는 경우



- 인라인 코드를 함수 호출로 바꾸기

함수 추출하기와의 차이점은 - 대체 함수가 존재하느냐.

인라인 코드를 대체할 수 있는 함수가 있다면 바꿔주어라!

우연히 비슷한 코드가 만들어져있는 경우에는 목적과 설계가 달라질 수 있기 때문에 함부로 바꾸어서는 안된다.



- 문장 슬라이드 하기

관련된 코드를 가까이 모아서 이해를 쉽게

다른 리팩터링 (함수 추출하기)등의 준비단게로 자주 실행된다.

부수효과에 주의해야한다.
연산이 무엇이고 어떻게 구성되는지 완벽히 이해해야하고, 
명령, 질의 분리원칙을 지켜서 부수효과가 없도록 한다.

명령-질의 분리원칙
함수는 그 성격에 따라 크게 2가지로 분류할 수 있다.
하나는 어떤 동작을 수행하는 명령이고, 하나는 답을 구하는 질의이다.



- 반복문 쪼개기

하나의 반복문에서 행해지는 두 일을, 두개의 반복문으로 쪼개기

왜? 같이 있으면, 수정할 때마다 두개 잘 이해해야 한다. 사용하기도 쉬워진다.

2개의 기능이 1개의 반복문에 있으면, 의존성있고 1개 수정하면 같이 수정됨.

느려지잖아? 리팩터링과 최적화를 구별하자

함수 추출하기를 꼭 해주자.



- 반복문을 파이프라인으로 바꾸기

**Collection Pipeline**를 사용해라

제일 중요한것 같다.





- 죽은 코드 제거하기

더 이상 사용하지 않는 코드는 지워라

언젠가 다시 필요해지지 않을까? => git으로 언제든 살려라.

저자는 후회해본적 없다 ㅋ





