# AJAX, HASH, PJAX



## AJAX

Asynchronous Javascript And XML



비동기 웹 응용 프로그램을 만들기 위해 클라이언트 측에서 사용되는 웹 개발 기술의 집합이다.

Ajax를 사용하면 웹 어플리케이션은 기존 페이지의 화면 동작을 방해하지 않으면서, 백그라운드에서 비동기적으로 서버로 데이터를 보내고 서버에서 데이터를 받아올 수 있다.



이는 전반적인 UI는 로컬이 담당하고, 필요한 데이터만 최소한으로 서버랑 통신하도록 하여, 사용자와 웹간의 상호작용을 빠르게 해준다.



Ajax는 Presentation Layer에서 Data 교환 레이어를 분리함으로써,
웹 페이지, 확장 웹 어플리케이션이 전체 페이지를 다시 로드할 필요없이 동적으로 컨텐츠를 변경할 수 있도록 한다.

즉, Ajax는 비동기식 자바스크립트와 XML을 뜻하고 브라우저에 내장된 XMLHttpRequest 객체를 통해서 전체 페에지를 새로 고치지 않도고 페이지의 일부분만을 위한 데이터를 로드하는 기법이다.



- 장점

1. 웹 페이지 속도 향상
2. 서버의 처리완료를 기다리지 않고 다른 작업을 수행가능
3. 새로고침 없는 사용자 경험을 구현할 수 있다.



- 단점

1. 히스토리 관리가 되지 않는다.
2. 연속으로 데이터를 요청할 시, 서버의 부하가 증가한다.
3. Ajax를 지원하지 않는 브라우저에서는 사용할 수 없다.
4. 다른 도메인과는 통신이 불가능하다. (Cross-Domain)



## Hash 등장

HASH 방식은, AJAX의 히스토리 관리가 되지 않는 문제점을 보완하기위해 등장했다.

Hash 방식은 URI의 `fragment identifier` 의 고유기능인 앵커를 사용한다.

link tag는 

```html
<a href="#about">About</a>
```

처럼 href 속성에 hash(#)가 추가된 URI가 주소창에 표시된다.



이렇게 사용하면 URI가 동일한 상태에서 hash가 변경되어도, 브라우저는 서버에 웹페이지를 요청하지 않는다.

왜냐하면 hash는 요청을 위한 것이 아니라, 앵커로 웹페이지 내부에서 이동을 위한 것이기 때문이다.

이 때문에 hash방식은 서버에 새로운 요청을 보내지 않고, 갱신되지 않지만 페이지마다 고유의 논리적 URL이 존재하므로 history를 관리할 수 있게된다.

hash가 변경될때마다, hash change 이벤트를 사용하여 컨트롤할 수도 있다.



이 hash 방식의 단점은 uri에 불필요한 #가 들어간다는 것이다.
일반적으로 hash 방식을 사용할 때 `#!` 를 사용하기도 하는데, 이것은 해시뱅이라고 하는 것이다.



하지만 아직, SEO문제가 있다 검색엔진은 웹 사이트의 컨텐츠를 수집하기 위해서 
Javascript 를 실행시키지 않기 때문에 hash 방식으로 만들어진 사이트의 컨텐츠를 수집하기 어렵다.
(구글은 해결했다)







## PJAX

AJAX를 사용하면, 웹사이트 속도 향상을 통해 사용자에게 좋은 사용자 경험을 전달할 수 있다.

하지만 이러한 SPA같은 것은 재빠른 방응을 구현할 때에는 최적이지만, 커뮤니티나 블로그 같은 SEO가 더 중요한 경우에는, 페이지별로 독립된 트래픽이 발생할 수 있기 때문에, 거대한 하나의 번들 파일을 받게하는 것은 효과적이지 못하다.



그러면

- SEO가 가능하고
- 히스토리관리가 가능하며
- 페이지 반응 속도가 빠르고
- 개발 및 유지보수가 어렵지 않아야 한다.



그렇게 pjax가 나왔다. pushState + ajax



pjax 개념 자체는 아주 단순하다. 기존 ajax를 기반으로 필요한 DOM만 갈아치우면서 pushState 를 이용하여 브라우저의 주소까지 변경해줌으로써 위 요구사항을 모두 만족시킬 수 있다.

Hash 방식에서는 URL이 변경되지 않아서 SEO문제가 있었으나, PJAX는 페이지마다 고유의 URI가 존재하기 때문에 아무 문제가 없다.